<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manual Purchase Agent API Demo v10</title>
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Prism.js for code highlighting -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/themes/prism.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/plugins/toolbar/prism-toolbar.min.css" rel="stylesheet">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/static/api-demo/css/styles.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">
                <i class="fas fa-robot me-2"></i>Manual Purchase Agent API v15.5
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#manuals-section">Manuals</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#parts-section">Parts</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#suppliers-section">Suppliers</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#profiles-section">Profiles</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#purchases-section">Purchases</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#enrichment-section">Enrichment</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#recording-section">Recording</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#system-section">System</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container my-5">
        <div class="row">
            <div class="col-12 text-center mb-5">
                <h1 class="display-4">Manual Purchase Agent API v15.5</h1>
                <p class="lead">Comprehensive API demonstration with GPT-4.1-Nano integration</p>
            </div>
        </div>

        <!-- API Explorer Section -->
        <div class="row mb-5">
            <div class="col-md-3">
                <div class="list-group sticky-top pt-3" id="api-menu">
                    <a href="#manuals-section" class="list-group-item list-group-item-action active">Manual APIs</a>
                    <a href="#parts-section" class="list-group-item list-group-item-action">Part APIs</a>
                    <a href="#suppliers-section" class="list-group-item list-group-item-action">Supplier APIs</a>
                    <a href="#profiles-section" class="list-group-item list-group-item-action">Profile APIs</a>
                    <a href="#purchases-section" class="list-group-item list-group-item-action">Purchase APIs</a>
                    <a href="#enrichment-section" class="list-group-item list-group-item-action">Enrichment APIs</a>
                    <a href="#recording-section" class="list-group-item list-group-item-action">Recording APIs</a>
                    <a href="#system-section" class="list-group-item list-group-item-action">System APIs</a>
                </div>
            </div>
            <div class="col-md-9">
                <div class="api-section" id="manuals-section">
                    <h2 class="mb-4">Manual APIs</h2>
                    
                    <!-- 1. Search Manuals API -->
                    <div class="card mb-4">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0"><span class="badge bg-primary me-2">POST</span> /api/manuals/search</h5>
                            <button class="btn btn-sm btn-outline-secondary copy-endpoint" data-endpoint="/api/manuals/search">
                                <i class="fas fa-copy"></i> Copy
                            </button>
                        </div>
                        <div class="card-body">
                            <p>Search for technical and parts manuals by make and model.</p>
                            
                            <form id="search-manuals-form" class="mb-3">
                                <div class="row g-3">
                                    <div class="col-md-4">
                                        <label for="search-make" class="form-label">Make:</label>
                                        <input type="text" class="form-control" id="search-make" placeholder="e.g. Toyota" required>
                                    </div>
                                    <div class="col-md-4">
                                        <label for="search-model" class="form-label">Model:</label>
                                        <input type="text" class="form-control" id="search-model" placeholder="e.g. Camry" required>
                                    </div>
                                    <div class="col-md-4">
                                        <label for="search-manual-type" class="form-label">Manual Type:</label>
                                        <select class="form-select" id="search-manual-type">
                                            <option value="technical">Technical</option>
                                            <option value="parts">Parts</option>
                                            <option value="repair">Repair</option>
                                            <option value="owner">Owner's</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="d-grid gap-2 mt-3">
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fas fa-search me-2"></i>Search Manuals
                                    </button>
                                </div>
                            </form>
                            
                            <div class="mt-4 example-code">
                                <h6>Example Request:</h6>
                                <pre><code class="language-javascript">fetch('/api/manuals/search', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    make: "Toyota",
    model: "Camry",
    manual_type: "technical"
  })
})
.then(response => response.json())
.then(data => console.log(data));</code></pre>
                            </div>
                            
                            <div class="mt-3">
                                <h6>Response:</h6>
                                <div class="response-container" id="search-manuals-response">
                                    <div class="text-center text-muted py-5">
                                        <i class="fas fa-code fa-2x mb-3"></i>
                                        <p>Response will appear here after submitting the form</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 2. Get All Manuals API -->
                    <div class="card mb-4">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0"><span class="badge bg-success me-2">GET</span> /api/manuals</h5>
                            <button class="btn btn-sm btn-outline-secondary copy-endpoint" data-endpoint="/api/manuals">
                                <i class="fas fa-copy"></i> Copy
                            </button>
                        </div>
                        <div class="card-body">
                            <div class="alert alert-info">
                                <h6><i class="fas fa-info-circle me-2"></i>About This Endpoint</h6>
                                <p>This endpoint lists all manuals that have been saved to the database. This includes manuals that were found through search (using the search endpoint above) and then saved for processing.</p>
                                <p>The workflow is typically:</p>
                                <ol>
                                    <li>Search for manuals using the <code>/api/manuals/search</code> endpoint</li>
                                    <li>Save interesting manuals to the database using <code>POST /api/manuals</code></li>
                                    <li>Use this endpoint to see all saved manuals</li>
                                    <li>Process saved manuals to extract parts and error codes</li>
                                </ol>
                            </div>
                            
                            <form id="list-manuals-form" class="mb-3">
                                <div class="row g-3">
                                    <div class="col-md-4">
                                        <label for="list-page" class="form-label">Page:</label>
                                        <input type="number" class="form-control" id="list-page" value="1" min="1">
                                    </div>
                                    <div class="col-md-4">
                                        <label for="list-per-page" class="form-label">Per Page:</label>
                                        <input type="number" class="form-control" id="list-per-page" value="10" min="1" max="50">
                                    </div>
                                    <div class="col-md-4">
                                        <label for="list-make" class="form-label">Make (optional):</label>
                                        <input type="text" class="form-control" id="list-make" placeholder="Filter by make">
                                    </div>
                                </div>
                                <div class="d-grid gap-2 mt-3">
                                    <button type="submit" class="btn btn-success">
                                        <i class="fas fa-list me-2"></i>List Saved Manuals
                                    </button>
                                </div>
                            </form>
                            
                            <div class="mt-4 example-code">
                                <h6>Example Request:</h6>
                                <pre><code class="language-javascript">fetch('/api/manuals?page=1&per_page=10')
.then(response => response.json())
.then(data => console.log(data));</code></pre>
                            </div>
                            
                            <div class="mt-3">
                                <h6>Response:</h6>
                                <div class="response-container" id="list-manuals-response">
                                    <div class="text-center text-muted py-5">
                                        <i class="fas fa-code fa-2x mb-3"></i>
                                        <p>Response will appear here after submitting the form</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 3. Process Manual API -->
                    <div class="card mb-4">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0"><span class="badge bg-primary me-2">POST</span> /api/manuals/{id}/process</h5>
                            <button class="btn btn-sm btn-outline-secondary copy-endpoint" data-endpoint="/api/manuals/{id}/process">
                                <i class="fas fa-copy"></i> Copy
                            </button>
                        </div>
                        <div class="card-body">
                            <div class="alert alert-info mb-3">
                                <h6><i class="fas fa-info-circle me-2"></i>About This Endpoint</h6>
                                <p>This endpoint processes a manual to extract part numbers and error codes. The <code>id</code> in the URL must be the ID of a manual that has been saved in the database.</p>
                                <p>To get a manual ID, you can:</p>
                                <ol>
                                    <li>Use the search function above and click "Save & Process" on a manual</li>
                                    <li>Use the "List Saved Manuals" function to see existing manual IDs</li>
                                    <li>Create a new manual entry with the POST /api/manuals endpoint</li>
                                </ol>
                                <p><strong>Enhanced Processing in v10:</strong></p>
                                <ul>
                                    <li><i class="fas fa-check text-success"></i> <strong>Role-based access control:</strong> Enterprise-grade permissions for processing manuals</li>
                                    <li><i class="fas fa-check text-success"></i> <strong>Audit logging:</strong> Comprehensive activity tracking for compliance requirements</li>
                                    <li><i class="fas fa-check text-success"></i> <strong>Custom ML models:</strong> Enhanced extraction using trained models</li>
                                    <li><i class="fas fa-check text-success"></i> <strong>Real-time collaboration:</strong> Multiple users can analyze manuals together</li>
                                    <li><i class="fas fa-check text-success"></i> <strong>Predictive analytics:</strong> AI-powered predictions for part failures</li>
                                    <li><i class="fas fa-check text-success"></i> <strong>Knowledge graph:</strong> Cross-manual relationships for technical information</li>
                                </ul>
                            </div>
                            
                            <form id="process-manual-form" class="mb-3">
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label for="process-manual-id" class="form-label">Manual ID:</label>
                                        <input type="number" class="form-control" id="process-manual-id" placeholder="Enter manual ID" required>
                                    </div>
                                </div>
                                <div class="d-grid gap-2 mt-3">
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fas fa-cog me-2"></i>Process Manual
                                    </button>
                                </div>
                            </form>
                            
                            <div class="mt-4 example-code">
                                <h6>Example Request:</h6>
                                <pre><code class="language-javascript">fetch('/api/manuals/1/process', {
  method: 'POST'
})
.then(response => response.json())
.then(data => console.log(data));</code></pre>
                            </div>
                            
                            <div class="mt-3">
                                <h6>Response:</h6>
                                <div class="response-container" id="process-manual-response">
                                    <div class="text-center text-muted py-5">
                                        <i class="fas fa-code fa-2x mb-3"></i>
                                        <p>Response will appear here after submitting the form</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 4. Extract Manual Components API (NEW in v10) -->
                    <div class="card mb-4">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0"><span class="badge bg-success me-2">GET</span> /api/manuals/{id}/components</h5>
                            <button class="btn btn-sm btn-outline-secondary copy-endpoint" data-endpoint="/api/manuals/{id}/components">
                                <i class="fas fa-copy"></i> Copy
                            </button>
                        </div>
                        <div class="card-body">
                            <div class="alert alert-warning mb-3">
                                <h6><i class="fas fa-star me-2"></i>NEW in v10!</h6>
                                <p>This endpoint parses a manual into key structural components with page number ranges, including:</p>
                                <div class="row mb-2">
                                    <div class="col-md-6">
                                        <ul class="mb-0">
                                            <li><i class="fas fa-tools text-primary"></i> Exploded view diagrams</li>
                                            <li><i class="fas fa-tools text-primary"></i> Installation instructions</li>
                                            <li><i class="fas fa-exclamation-circle text-danger"></i> Error code tables</li>
                                            <li><i class="fas fa-sitemap text-success"></i> Troubleshooting flowcharts</li>
                                        </ul>
                                    </div>
                                    <div class="col-md-6">
                                        <ul class="mb-0">
                                            <li><i class="fas fa-cogs text-secondary"></i> Maintenance procedures</li>
                                            <li><i class="fas fa-list-alt text-info"></i> Parts catalogs</li>
                                            <li><i class="fas fa-exclamation-triangle text-warning"></i> Safety warnings</li>
                                            <li><i class="fas fa-microchip text-dark"></i> Technical specifications</li>
                                        </ul>
                                    </div>
                                </div>
                                <p class="mb-0 mt-3">This feature uses GPT-4.1-Nano for comprehensive PDF analysis and identifies exact page ranges for each component.</p>
                            </div>
                            
                            <!-- GET Components Form -->
                            <form id="extract-components-form" class="mb-3">
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label for="components-manual-id" class="form-label">Manual ID:</label>
                                        <input type="number" class="form-control" id="components-manual-id" placeholder="Enter manual ID" required>
                                    </div>
                                </div>
                                <div class="row g-3 mt-2">
                                    <div class="col-md-8">
                                        <div class="d-grid">
                                            <button type="submit" class="btn btn-success">
                                                <i class="fas fa-puzzle-piece me-2"></i>Extract Components
                                            </button>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="d-grid">
                                            <button type="button" class="btn btn-outline-secondary" id="clear-components-cache">
                                                <i class="fas fa-sync-alt me-2"></i>Clear Cache
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </form>
                            
                            <div class="mt-4 example-code">
                                <h6>Example Request:</h6>
                                <pre><code class="language-javascript">fetch('/api/manuals/1/components')
.then(response => response.json())
.then(data => console.log(data));</code></pre>
                            </div>
                            
                            <!-- Custom Process Components Section -->
                            <hr class="my-4">
                            
                            <div class="alert alert-primary mb-3">
                                <h6><i class="fas fa-lightbulb me-2"></i>Custom Component Extraction</h6>
                                <p>You can also specify a custom prompt to guide the component extraction process using the POST endpoint below. This allows you to focus on specific types of components you're interested in.</p>
                            </div>
                            
                            <div class="card-header d-flex justify-content-between align-items-center mb-3">
                                <h5 class="mb-0"><span class="badge bg-primary me-2">POST</span> /api/manuals/{id}/process-components</h5>
                                <button class="btn btn-sm btn-outline-secondary copy-endpoint" data-endpoint="/api/manuals/{id}/process-components">
                                    <i class="fas fa-copy"></i> Copy
                                </button>
                            </div>
                            
                            <form id="process-components-form" class="mb-3">
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label for="process-components-manual-id" class="form-label">Manual ID:</label>
                                        <input type="number" class="form-control" id="process-components-manual-id" placeholder="Enter manual ID" required>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="process-components-focus" class="form-label">Component Focus:</label>
                                        <select class="form-select" id="process-components-focus">
                                            <option value="">General (all components)</option>
                                            <option value="mechanical">Mechanical components</option>
                                            <option value="electrical">Electrical systems</option>
                                            <option value="diagnostic">Diagnostic procedures</option>
                                        </select>
                                    </div>
                                    <div class="col-md-12">
                                        <label for="process-components-prompt" class="form-label">Custom Prompt (optional):</label>
                                        <textarea class="form-control" id="process-components-prompt" rows="3" placeholder="Enter a custom prompt to guide the component extraction process..."></textarea>
                                        <div class="form-text">
                                            Example: "Focus on extracting detailed mechanical component information including materials, tolerances, and assembly instructions"
                                        </div>
                                    </div>
                                </div>
                                <div class="d-grid gap-2 mt-3">
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fas fa-wrench me-2"></i>Process with Custom Focus
                                    </button>
                                </div>
                            </form>
                            
                            <div class="mt-4 example-code">
                                <h6>Example Request:</h6>
                                <pre><code class="language-javascript">fetch('/api/manuals/1/process-components', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    prompt: "Focus on extracting detailed mechanical component information..."
  })
})
.then(response => response.json())
.then(data => console.log(data));</code></pre>
                            </div>
                            
                            <div class="mt-3">
                                <h6>Response:</h6>
                                <div class="response-container" id="extract-components-response">
                                    <div class="text-center text-muted py-5">
                                        <i class="fas fa-code fa-2x mb-3"></i>
                                        <p>Response will appear here after submitting the form</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="api-section" id="parts-section" style="display: none;">
                    <h2 class="mb-4">Part APIs</h2>
                    
                    <!-- 1. Resolve Part API -->
                    <div class="card mb-4">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0"><span class="badge bg-primary me-2">POST</span> /api/parts/resolve</h5>
                            <button class="btn btn-sm btn-outline-secondary copy-endpoint" data-endpoint="/api/parts/resolve">
                                <i class="fas fa-copy"></i> Copy
                            </button>
                        </div>
                        <div class="card-body">
                            <p>Convert generic part descriptions to OEM part numbers using AI.</p>
                            
                            <form id="resolve-part-form" class="mb-3">
                                <div class="row g-3">
                                    <div class="col-md-12">
                                        <label for="part-description" class="form-label">Part Description:</label>
                                        <input type="text" class="form-control" id="part-description" placeholder="e.g. Air filter" required>
                                    </div>
                                    <div class="col-md-4">
                                        <label for="part-make" class="form-label">Make:</label>
                                        <input type="text" class="form-control" id="part-make" placeholder="e.g. Toyota" required>
                                    </div>
                                    <div class="col-md-4">
                                        <label for="part-model" class="form-label">Model:</label>
                                        <input type="text" class="form-control" id="part-model" placeholder="e.g. Camry" required>
                                    </div>
                                    <div class="col-md-4">
                                        <label for="part-year" class="form-label">Year (optional):</label>
                                        <input type="text" class="form-control" id="part-year" placeholder="e.g. 2020">
                                    </div>
                                </div>
                                <div class="card mt-3">
                                    <div class="card-header bg-light">
                                        <h6 class="mb-0"><i class="fas fa-search me-1"></i> Search Options</h6>
                                    </div>
                                    <div class="card-body">
                                        <div class="row g-3">
                                            <div class="col-md-3">
                                                <div class="form-check form-switch ps-5">
                                                    <input class="form-check-input" type="checkbox" role="switch" id="search-db-toggle" checked style="margin-left: -3.5em;">
                                                    <label class="form-check-label" for="search-db-toggle">
                                                        <i class="fas fa-database me-1"></i> Search Database
                                                    </label>
                                                    <small class="form-text text-muted d-block">Fast results from saved matches</small>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="form-check form-switch ps-5">
                                                    <input class="form-check-input" type="checkbox" role="switch" id="search-manual-toggle" checked style="margin-left: -3.5em;">
                                                    <label class="form-check-label" for="search-manual-toggle">
                                                        <i class="fas fa-book me-1"></i> Search Manuals
                                                    </label>
                                                    <small class="form-text text-muted d-block">AI-powered manual analysis</small>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="form-check form-switch ps-5">
                                                    <input class="form-check-input" type="checkbox" role="switch" id="search-web-toggle" checked style="margin-left: -3.5em;">
                                                    <label class="form-check-label" for="search-web-toggle">
                                                        <i class="fas fa-globe me-1"></i> Search Web
                                                    </label>
                                                    <small class="form-text text-muted d-block">Real-time web search</small>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="form-check form-switch ps-5">
                                                    <input class="form-check-input" type="checkbox" role="switch" id="save-results-toggle" checked style="margin-left: -3.5em;">
                                                    <label class="form-check-label" for="save-results-toggle">
                                                        <i class="fas fa-save me-1"></i> Save Results
                                                    </label>
                                                    <small class="form-text text-muted d-block">Store results in database</small>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="alert alert-info mb-0 mt-3">
                                            <small><i class="fas fa-info-circle me-1"></i> You can toggle search methods to control where the system looks for parts. Using multiple sources improves accuracy. Disabling "Save Results" will prevent storing the results in the database.</small>
                                        </div>
                                    </div>
                                </div>
                                <div class="d-grid gap-2 mt-3">
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fas fa-exchange-alt me-2"></i>Resolve Part
                                    </button>
                                </div>
                            </form>
                            
                            <div class="mt-4 example-code">
                                <h6>Example Request:</h6>
                                <pre><code class="language-javascript">fetch('/api/parts/resolve', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    description: "Air filter",
    make: "Toyota",
    model: "Camry",
    year: "2020"
  })
})
.then(response => response.json())
.then(data => console.log(data));</code></pre>
                            </div>
                            
                            <div class="mt-3">
                                <h6>Response:</h6>
                                <div class="response-container" id="resolve-part-response">
                                    <div class="text-center text-muted py-5">
                                        <i class="fas fa-code fa-2x mb-3"></i>
                                        <p>Response will appear here after submitting the form</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="api-section" id="suppliers-section" style="display: none;">
                    <h2 class="mb-4">Supplier APIs</h2>
                    
                    <!-- 1. Search Suppliers API -->
                    <div class="card mb-4">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0"><span class="badge bg-primary me-2">POST</span> /api/suppliers/search</h5>
                            <button class="btn btn-sm btn-outline-secondary copy-endpoint" data-endpoint="/api/suppliers/search">
                                <i class="fas fa-copy"></i> Copy
                            </button>
                        </div>
                        <div class="card-body">
                            <p>Find suppliers for a specific part number.</p>
                            
                            <form id="search-suppliers-form" class="mb-3">
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label for="supplier-part-number" class="form-label">Part Number/Description:</label>
                                        <input type="text" class="form-control" id="supplier-part-number" placeholder="e.g. 17801-0H080 or Air Filter" required>
                                    </div>
                                    <div class="col-md-3">
                                        <label for="supplier-make" class="form-label">Make (optional):</label>
                                        <input type="text" class="form-control" id="supplier-make" placeholder="e.g. Toyota">
                                    </div>
                                    <div class="col-md-3">
                                        <label for="supplier-model" class="form-label">Model (optional):</label>
                                        <input type="text" class="form-control" id="supplier-model" placeholder="e.g. Camry">
                                    </div>
                                </div>
                                <div class="form-check mt-3">
                                    <input class="form-check-input" type="checkbox" id="oem-only">
                                    <label class="form-check-label" for="oem-only">
                                        OEM parts only
                                    </label>
                                </div>
                                <div class="d-grid gap-2 mt-3">
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fas fa-store me-2"></i>Find Suppliers
                                    </button>
                                </div>
                            </form>
                            
                            <div class="mt-4 example-code">
                                <h6>Example Request:</h6>
                                <pre><code class="language-javascript">fetch('/api/suppliers/search', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    part_number: "17801-0H080",
    make: "Toyota",
    model: "Camry",
    oem_only: false
  })
})
.then(response => response.json())
.then(data => console.log(data));</code></pre>
                            </div>
                            
                            <div class="mt-3">
                                <h6>Response:</h6>
                                <div class="response-container" id="search-suppliers-response">
                                    <div class="text-center text-muted py-5">
                                        <i class="fas fa-code fa-2x mb-3"></i>
                                        <p>Response will appear here after submitting the form</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="api-section" id="profiles-section" style="display: none;">
                    <h2 class="mb-4">Profile APIs</h2>
                    
                    <!-- Saved Profiles Section -->
                    <div class="card mb-4">
                        <div class="card-header bg-primary text-white">
                            <h5 class="mb-0"><i class="fas fa-address-card me-2"></i>Saved Billing Profiles</h5>
                        </div>
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <p class="mb-0">View all billing profiles currently saved in the database.</p>
                                <button id="load-profiles-btn" class="btn btn-outline-primary">
                                    <i class="fas fa-sync-alt me-1"></i> Load Profiles
                                </button>
                            </div>
                            
                            <div id="profiles-container">
                                <div class="text-center text-muted py-4">
                                    <i class="fas fa-address-card fa-2x mb-3"></i>
                                    <p>Click the "Load Profiles" button to view saved billing profiles</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 1. Create Profile API -->
                    <div class="card mb-4">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0"><span class="badge bg-primary me-2">POST</span> /api/profiles</h5>
                            <button class="btn btn-sm btn-outline-secondary copy-endpoint" data-endpoint="/api/profiles">
                                <i class="fas fa-copy"></i> Copy
                            </button>
                        </div>
                        <div class="card-body">
                            <p>Create a new billing profile with encrypted payment information.</p>
                            
                            <form id="create-profile-form" class="mb-3">
                                <div class="mb-3">
                                    <label for="profile-name" class="form-label">Profile Name:</label>
                                    <input type="text" class="form-control" id="profile-name" placeholder="e.g. Personal Account" required>
                                </div>
                                
                                <h6 class="mt-4">Billing Address:</h6>
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label for="billing-name" class="form-label">Full Name:</label>
                                        <input type="text" class="form-control" id="billing-name" placeholder="Full Name" required>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="billing-phone" class="form-label">Phone:</label>
                                        <input type="text" class="form-control" id="billing-phone" placeholder="Phone Number" required>
                                    </div>
                                    <div class="col-md-12">
                                        <label for="billing-address1" class="form-label">Address Line 1:</label>
                                        <input type="text" class="form-control" id="billing-address1" placeholder="Street Address" required>
                                    </div>
                                    <div class="col-md-12">
                                        <label for="billing-address2" class="form-label">Address Line 2 (optional):</label>
                                        <input type="text" class="form-control" id="billing-address2" placeholder="Apt, Suite, Unit, etc.">
                                    </div>
                                    <div class="col-md-5">
                                        <label for="billing-city" class="form-label">City:</label>
                                        <input type="text" class="form-control" id="billing-city" placeholder="City" required>
                                    </div>
                                    <div class="col-md-4">
                                        <label for="billing-state" class="form-label">State:</label>
                                        <input type="text" class="form-control" id="billing-state" placeholder="State" required>
                                    </div>
                                    <div class="col-md-3">
                                        <label for="billing-zip" class="form-label">ZIP Code:</label>
                                        <input type="text" class="form-control" id="billing-zip" placeholder="ZIP Code" required>
                                    </div>
                                </div>
                                
                                <h6 class="mt-4">Payment Information:</h6>
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label for="payment-card-number" class="form-label">Card Number:</label>
                                        <input type="text" class="form-control" id="payment-card-number" placeholder="Card Number" required>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="payment-name" class="form-label">Name on Card:</label>
                                        <input type="text" class="form-control" id="payment-name" placeholder="Name on Card" required>
                                    </div>
                                    <div class="col-md-4">
                                        <label for="payment-exp-month" class="form-label">Expiration Month:</label>
                                        <input type="text" class="form-control" id="payment-exp-month" placeholder="MM" required>
                                    </div>
                                    <div class="col-md-4">
                                        <label for="payment-exp-year" class="form-label">Expiration Year:</label>
                                        <input type="text" class="form-control" id="payment-exp-year" placeholder="YYYY" required>
                                    </div>
                                    <div class="col-md-4">
                                        <label for="payment-cvv" class="form-label">CVV:</label>
                                        <input type="text" class="form-control" id="payment-cvv" placeholder="CVV" required>
                                    </div>
                                </div>
                                
                                <div class="alert alert-info mt-3">
                                    <i class="fas fa-shield-alt me-2"></i> All sensitive information will be encrypted in the database using Fernet symmetric encryption.
                                </div>
                                
                                <div class="d-grid gap-2 mt-3">
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fas fa-save me-2"></i>Create Profile
                                    </button>
                                </div>
                            </form>
                            
                            <div class="mt-4 example-code">
                                <h6>Example Request:</h6>
                                <pre><code class="language-javascript">fetch('/api/profiles', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    name: "Personal Account",
    billing_address: {
      name: "John Doe",
      address1: "123 Main St",
      city: "Anytown",
      state: "CA",
      zip: "12345",
      phone: "555-123-4567"
    },
    payment_info: {
      card_number: "4111111111111111",
      name: "John Doe",
      exp_month: "12",
      exp_year: "2025",
      cvv: "123"
    }
  })
})
.then(response => response.json())
.then(data => console.log(data));</code></pre>
                            </div>
                            
                            <div class="mt-3">
                                <h6>Response:</h6>
                                <div class="response-container" id="create-profile-response">
                                    <div class="text-center text-muted py-5">
                                        <i class="fas fa-code fa-2x mb-3"></i>
                                        <p>Response will appear here after submitting the form</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="api-section" id="purchases-section" style="display: none;">
                    <h2 class="mb-4">Purchase APIs</h2>
                    
                    <!-- 1. Create Purchase API -->
                    <div class="card mb-4">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0"><span class="badge bg-primary me-2">POST</span> /api/purchases</h5>
                            <button class="btn btn-sm btn-outline-secondary copy-endpoint" data-endpoint="/api/purchases">
                                <i class="fas fa-copy"></i> Copy
                            </button>
                        </div>
                        <div class="card-body">
                            <p>Initiate an automated purchase for a part using a billing profile.</p>
                            
                            <form id="create-purchase-form" class="mb-3">
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label for="purchase-part-number" class="form-label">Part Number:</label>
                                        <input type="text" class="form-control" id="purchase-part-number" placeholder="e.g. 17801-0H080" required>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="purchase-quantity" class="form-label">Quantity:</label>
                                        <input type="number" class="form-control" id="purchase-quantity" value="1" min="1" required>
                                    </div>
                                    <div class="col-md-12">
                                        <label for="purchase-supplier-url" class="form-label">Supplier URL:</label>
                                        <input type="url" class="form-control" id="purchase-supplier-url" placeholder="e.g. https://www.example.com/product/12345" required>
                                    </div>
                                    <div class="col-md-12">
                                        <label for="purchase-profile-id" class="form-label">Billing Profile ID:</label>
                                        <input type="number" class="form-control" id="purchase-profile-id" placeholder="e.g. 1" required>
                                    </div>
                                </div>
                                
                                <div class="alert alert-warning mt-3">
                                    <i class="fas fa-exclamation-triangle me-2"></i> Warning: This will attempt to make a real purchase using the provided supplier URL and billing profile.
                                </div>
                                
                                <div class="d-grid gap-2 mt-3">
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fas fa-shopping-cart me-2"></i>Create Purchase
                                    </button>
                                </div>
                            </form>
                            
                            <div class="mt-4 example-code">
                                <h6>Example Request:</h6>
                                <pre><code class="language-javascript">fetch('/api/purchases', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    part_number: "17801-0H080",
    supplier_url: "https://www.example.com/product/17801-0H080",
    quantity: 1,
    billing_profile_id: 1
  })
})
.then(response => response.json())
.then(data => console.log(data));</code></pre>
                            </div>
                            
                            <div class="mt-3">
                                <h6>Response:</h6>
                                <div class="response-container" id="create-purchase-response">
                                    <div class="text-center text-muted py-5">
                                        <i class="fas fa-code fa-2x mb-3"></i>
                                        <p>Response will appear here after submitting the form</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer mt-auto py-3 bg-light">
        <div class="container text-center">
            <span class="text-muted">
                Manual Purchase Agent API Demo v10.0.0 &copy; 2025
                <span class="mx-2">|</span>
                <a href="/API_REFERENCE.md" class="text-decoration-none">API Reference</a>
            </span>
        </div>
    </footer>

    <!-- Bootstrap 5 JS with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Prism.js for code highlighting -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/plugins/toolbar/prism-toolbar.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js"></script>
    
    <!-- API Demo JS - with cache busting -->
    <script src="/static/api-demo/js/api.js?v=10.1"></script>
    <script src="/static/api-demo/js/main.js?v=10.1"></script>
</body>
</html>